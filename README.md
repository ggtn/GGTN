# GGTN
CircGGNN-master:
The CircGGNN model is implemented in Python and applied to c/c++ source code vulnerability detection.

Codegrahs-tensor-master:
Based on the Joern code parser, the AST/CFG/DDG/NCS code graph is extracted, and the code node tokens sequence is converted into a low dimensional dense embedded vector using word2vec. The code adjacency tensor is constructed using the adjacency matrix of four code graphs and labeled with sample labels.

Execution process:
Code tensor feature extraction

1.python3 get_ data_ by_ joern.py: call Joern built-in command to generate code attribute graph (CPG) for each function sample and store it in dot file.

2.python3 select_ functions_ dotfiles.py: filter the dot files generated by function samples, and remove the code attribute graph dot files of global functions <global> and inline functions.
  
3.python3 joernAnalysis-new-version.py: parse the function sample CPG, sort and split the ast/cfg/ddg code diagrams, give the leaf nodes to build NCS in sequence, and store the four code diagrams in the JSON file.

4.python3 create_ target_ for_ dataset.py: generate corresponding sample labels for the sorted source function samples, "1" indicates fragile samples, "0" indicates security samples; Generate a sample label dictionary "xxx.json", whose structure is {function_name:label}.

5.python3 extract_ graphs_ tensor.py: use the word2vec model to generate the node tokens embedding vector, convert the node type to a 1-bit digital label, and splice it with the embedding vector as the initial embedding of the node. The edge sets of the four code graphs are transformed into two-dimensional adjacency matrices to form code tensor features, and each sample is labeled to form an input data set for model training.
  
Notes: in each step above, pay attention to adjusting the storage path of input and output data according to the actual situation.
In step 5, you can configure the word2vec embedded vector length as required.
  
Model training
6. copy the generated code tensor feature data set to the circggnn master/dataset folder.

7. For parameter configuration of circgggnn model, see circggnn master/configurations json.

8. run the "python3 main.py -p" command to start model training, cut the samples in the ratio of 0.8:0.1:0.1, and use them for training, verification and testing respectively, and finally output the model test results; Run the "python3 main.py -ps" command to introduce the early stop mechanism to prevent over fitting.
